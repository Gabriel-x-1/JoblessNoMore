<nav
        th:fragment="navbar"
        class="navbar"
        xmlns:th="http://www.thymeleaf.org"
>
  <div class="nav-logo">JobLessNoMore</div>

  <ul class="nav-links" id="navLinks">
    <!-- These are hidden by default, JS will reveal the one the user has access to -->
    <li id="seeker-dashboard-link" style="display: none;">
      <a href="/seeker/dashboard">Job Seeker Dashboard</a>
    </li>
    <li id="company-dashboard-link" style="display: none;">
      <a href="/company/dashboard">Company Dashboard</a>
    </li>

    <li>
      <form th:action="@{/auth/logout}" method="post" style="display: inline">
        <button type="submit" class="logout-btn">Logout</button>
      </form>
    </li>
  </ul>

  <div class="nav-toggle" id="navToggle">&#9776;</div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const checkAccess = async (url, elementId) => {
        try {
          const response = await fetch(url, {
            method: "HEAD",
            credentials: "include"
          });

          if (response.ok && !response.redirected) {
            document.getElementById(elementId).style.display = "list-item";
          }
        } catch (error) {
          console.warn(`Access check failed for ${url}:`, error);
        }
      };

      checkAccess("/seeker/dashboard", "seeker-dashboard-link");
      checkAccess("/company/dashboard", "company-dashboard-link");
    });
  </script>
</nav>
